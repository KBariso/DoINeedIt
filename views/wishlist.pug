extends layout.pug

block content
  link(rel="stylesheet", href='/stylesheets/wishlist.css')
  div.content-container
    div.left-nav-bar
      span My Wishlists
      span
        a(href="/wishlists/new")
          i(class="far fa-plus-square")
      ul
        each wishlist in wishlistsByUser
          li.user-wishlists
            a(href=`/wishlists/${wishlist.id}`) #{wishlist.name}
    div.middle-section
      h1 #{wishlist.name}
      h3 By #{wishlist.User.username}
      if (wishlist.description)
        p #{wishlist.description}
      if (authorized)
        a(href=`/wishlists/${wishlist.id}/items/new`) Add an item
        a(href=`/wishlists/${wishlist.id}/edit`) Edit Wishlist
      div
        if (items)
          each item in items
            div
              if (authorized)
                input(type="checkbox", name="purchased" value="purchased")
              span
                a(href=`/wishlists/${wishlist.id}/items/${item.id}`) #{item.name}
              span #{item.price}
              if (authorized)
                a(href=`/wishlists/${wishlist.id}/items/${item.id}/edit`)
                  i(class="far fa-edit")
                a(href=`/wishlists/${wishlist.id}/items/${item.id}/delete`)
                  i(class="far fa-trash-alt")
      p Total cost: $#{totalPrice}
      h3 Comments
      form(action=`/wishlists/${wishlist.id}/comments/new`, method="post")
        input(type="hidden" name="_csrf" value=csrfToken)
        input(type="text", name="content" value=content)
        button(type="submit") Post Comment
      div.comments-container
        if comments
            ul
                each comment in comments
                    li.comment-border
                        p #{comment.User.username}
                        p #{comment.content}
                        p #{comment.updatedAt.getMonth() + 1}/#{comment.updatedAt.getDate()}/#{comment.updatedAt.getFullYear()} #{comment.updatedAt.getHours()}:#{comment.updatedAt.getMinutes()}
                        if userId == `${comment.userId}`
                          a(href=`/comments/${comment.id}/edit`) Edit Comment
                          a(href=`/comments/${comment.id}/delete`) Delete Comment
//- block wishlistContent
